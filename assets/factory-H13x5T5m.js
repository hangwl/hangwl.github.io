import{F as I,w as M}from"./index-DfB3xycO.js";import{r as j}from"./index-Chjiymov.js";function A(h,p){for(var v=0;v<p.length;v++){const i=p[v];if(typeof i!="string"&&!Array.isArray(i)){for(const y in i)if(y!=="default"&&!(y in h)){const m=Object.getOwnPropertyDescriptor(i,y);m&&Object.defineProperty(h,y,m.get?m:{enumerable:!0,get:()=>i[y]})}}}return Object.freeze(Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}))}var w={},k;function F(){return k||(k=1,function(h){function p(t){"@babel/helpers - typeof";return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},p(t)}Object.defineProperty(h,"__esModule",{value:!0}),h.default=T;var v=H(I()),i=y(j());function y(t){return t&&t.__esModule?t:{default:t}}function m(t){if(typeof WeakMap!="function")return null;var n=new WeakMap,a=new WeakMap;return(m=function(s){return s?a:n})(t)}function H(t,n){if(t&&t.__esModule)return t;if(t===null||p(t)!=="object"&&typeof t!="function")return{default:t};var a=m(n);if(a&&a.has(t))return a.get(t);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)){var e=s?Object.getOwnPropertyDescriptor(t,r):null;e&&(e.get||e.set)?Object.defineProperty(o,r,e):o[r]=t[r]}return o.default=t,a&&a.set(t,o),o}function z(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function C(t,n){for(var a=0;a<n.length;a++){var o=n[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function U(t,n,a){return n&&C(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function S(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&b(t,n)}function b(t,n){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,s){return o.__proto__=s,o},b(t,n)}function D(t){var n=L();return function(){var o=g(t),s;if(n){var r=g(this).constructor;s=Reflect.construct(o,arguments,r)}else s=o.apply(this,arguments);return W(this,s)}}function W(t,n){if(n&&(p(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}function d(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function g(t){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},g(t)}var O=["AfterExport","AfterPlot","Animated","AnimatingFrame","AnimationInterrupted","AutoSize","BeforeExport","BeforeHover","ButtonClicked","Click","ClickAnnotation","Deselect","DoubleClick","Framework","Hover","LegendClick","LegendDoubleClick","Relayout","Relayouting","Restyle","Redraw","Selected","Selecting","SliderChange","SliderEnd","SliderStart","SunburstClick","Transitioning","TransitionInterrupted","Unhover","WebGlContextLost"],P=["plotly_restyle","plotly_redraw","plotly_relayout","plotly_relayouting","plotly_doubleclick","plotly_animated","plotly_sunburstclick"],_=typeof window<"u";function T(t){var n=function(a){S(s,a);var o=D(s);function s(r){var e;return z(this,s),e=o.call(this,r),e.p=Promise.resolve(),e.resizeHandler=null,e.handlers={},e.syncWindowResize=e.syncWindowResize.bind(d(e)),e.syncEventHandlers=e.syncEventHandlers.bind(d(e)),e.attachUpdateEvents=e.attachUpdateEvents.bind(d(e)),e.getRef=e.getRef.bind(d(e)),e.handleUpdate=e.handleUpdate.bind(d(e)),e.figureCallback=e.figureCallback.bind(d(e)),e.updatePlotly=e.updatePlotly.bind(d(e)),e}return U(s,[{key:"updatePlotly",value:function(e,l,f){var u=this;this.p=this.p.then(function(){if(!u.unmounting){if(!u.el)throw new Error("Missing element reference");return t.react(u.el,{data:u.props.data,layout:u.props.layout,config:u.props.config,frames:u.props.frames})}}).then(function(){u.unmounting||(u.syncWindowResize(e),u.syncEventHandlers(),u.figureCallback(l),f&&u.attachUpdateEvents())}).catch(function(c){u.props.onError&&u.props.onError(c)})}},{key:"componentDidMount",value:function(){this.unmounting=!1,this.updatePlotly(!0,this.props.onInitialized,!0)}},{key:"componentDidUpdate",value:function(e){this.unmounting=!1;var l=e.frames&&e.frames.length?e.frames.length:0,f=this.props.frames&&this.props.frames.length?this.props.frames.length:0,u=!(e.layout===this.props.layout&&e.data===this.props.data&&e.config===this.props.config&&f===l),c=e.revision!==void 0,E=e.revision!==this.props.revision;!u&&(!c||c&&!E)||this.updatePlotly(!1,this.props.onUpdate,!1)}},{key:"componentWillUnmount",value:function(){this.unmounting=!0,this.figureCallback(this.props.onPurge),this.resizeHandler&&_&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),this.removeUpdateEvents(),t.purge(this.el)}},{key:"attachUpdateEvents",value:function(){var e=this;!this.el||!this.el.removeListener||P.forEach(function(l){e.el.on(l,e.handleUpdate)})}},{key:"removeUpdateEvents",value:function(){var e=this;!this.el||!this.el.removeListener||P.forEach(function(l){e.el.removeListener(l,e.handleUpdate)})}},{key:"handleUpdate",value:function(){this.figureCallback(this.props.onUpdate)}},{key:"figureCallback",value:function(e){if(typeof e=="function"){var l=this.el,f=l.data,u=l.layout,c=this.el._transitionData?this.el._transitionData._frames:null,E={data:f,layout:u,frames:c};e(E,this.el)}}},{key:"syncWindowResize",value:function(e){var l=this;_&&(this.props.useResizeHandler&&!this.resizeHandler?(this.resizeHandler=function(){return t.Plots.resize(l.el)},window.addEventListener("resize",this.resizeHandler),e&&this.resizeHandler()):!this.props.useResizeHandler&&this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null))}},{key:"getRef",value:function(e){this.el=e,this.props.debug&&_&&(window.gd=this.el)}},{key:"syncEventHandlers",value:function(){var e=this;O.forEach(function(l){var f=e.props["on"+l],u=e.handlers[l],c=!!u;f&&!c?e.addEventHandler(l,f):!f&&c?e.removeEventHandler(l):f&&c&&f!==u&&(e.removeEventHandler(l),e.addEventHandler(l,f))})}},{key:"addEventHandler",value:function(e,l){this.handlers[e]=l,this.el.on(this.getPlotlyEventName(e),this.handlers[e])}},{key:"removeEventHandler",value:function(e){this.el.removeListener(this.getPlotlyEventName(e),this.handlers[e]),delete this.handlers[e]}},{key:"getPlotlyEventName",value:function(e){return"plotly_"+e.toLowerCase()}},{key:"render",value:function(){return v.default.createElement("div",{id:this.props.divId,style:this.props.style,ref:this.getRef,className:this.props.className})}}]),s}(v.Component);return n.propTypes={data:i.default.arrayOf(i.default.object),config:i.default.object,layout:i.default.object,frames:i.default.arrayOf(i.default.object),revision:i.default.number,onInitialized:i.default.func,onPurge:i.default.func,onError:i.default.func,onUpdate:i.default.func,debug:i.default.bool,style:i.default.object,className:i.default.string,useResizeHandler:i.default.bool,divId:i.default.string},O.forEach(function(a){n.propTypes["on"+a]=i.default.func}),n.defaultProps={debug:!1,useResizeHandler:!1,data:[],style:{position:"relative",display:"inline-block"}},n}}(w)),w}var R=F();const q=M(R),N=A({__proto__:null,default:q},[R]);export{N as f};
