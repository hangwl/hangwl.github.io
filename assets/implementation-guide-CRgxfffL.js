import{j as i}from"./index-BKgolIEe.js";const n=[{id:"implementation-guide",title:"Implementation Guide",level:1},{id:"table-of-contents",title:"Table of Contents",level:2},{id:"architecture-decision-backend",title:"Architecture Decision: Backend",level:2},{id:"recommendation-serverless-lambda--api-gateway",title:"Recommendation: Serverless (Lambda + API Gateway)",level:3},{id:"proposed-architecture",title:"Proposed Architecture",level:3},{id:"phase-1-aws-cognito-setup",title:"Phase 1: AWS Cognito Setup",level:2},{id:"11-create-cognito-user-pool",title:"1.1 Create Cognito User Pool",level:3},{id:"12-configure-app-client",title:"1.2 Configure App Client",level:3},{id:"13-configure-hosted-ui-domain",title:"1.3 Configure Hosted UI Domain",level:3},{id:"14-create-cognito-identity-pool",title:"1.4 Create Cognito Identity Pool",level:3},{id:"15-configure-iam-roles-for-identity-pool",title:"1.5 Configure IAM Roles for Identity Pool",level:3},{id:"16-note-key-values",title:"1.6 Note Key Values",level:3},{id:"phase-2-azure-ad-federation",title:"Phase 2: Azure AD Federation",level:2},{id:"21-create-app-registration-in-azure-ad",title:"2.1 Create App Registration in Azure AD",level:3},{id:"22-configure-api-permissions",title:"2.2 Configure API Permissions",level:3},{id:"23-create-client-secret",title:"2.3 Create Client Secret",level:3},{id:"24-note-azure-ad-values",title:"2.4 Note Azure AD Values",level:3},{id:"25-configure-azure-ad-as-idp-in-cognito",title:"2.5 Configure Azure AD as IdP in Cognito",level:3},{id:"26-configure-attribute-mapping",title:"2.6 Configure Attribute Mapping",level:3},{id:"27-enable-azure-ad-in-app-client",title:"2.7 Enable Azure AD in App Client",level:3},{id:"28-configure-conditional-access-mfa-in-azure-ad",title:"2.8 Configure Conditional Access (MFA) in Azure AD",level:3},{id:"phase-3-frontend-authentication-amplify",title:"Phase 3: Frontend Authentication (Amplify)",level:2},{id:"31-install-dependencies",title:"3.1 Install Dependencies",level:3},{id:"32-amplify-configuration",title:"3.2 Amplify Configuration",level:3},{id:"33-auth-provider-setup",title:"3.3 Auth Provider Setup",level:3},{id:"34-auth-hook",title:"3.4 Auth Hook",level:3},{id:"35-protected-route-component",title:"3.5 Protected Route Component",level:3},{id:"36-login-page-with-federated-sign-in",title:"3.6 Login Page with Federated Sign-In",level:3},{id:"37-api-client-with-auth",title:"3.7 API Client with Auth",level:3},{id:"phase-4-backend-api",title:"Phase 4: Backend API",level:2},{id:"41-project-structure-lambda",title:"4.1 Project Structure (Lambda)",level:3},{id:"42-token-validation-middleware",title:"4.2 Token Validation Middleware",level:3},{id:"43-serverless-configuration",title:"4.3 Serverless Configuration",level:3},{id:"phase-5-s3-data-access",title:"Phase 5: S3 Data Access",level:2},{id:"51-generate-pre-signed-urls",title:"5.1 Generate Pre-signed URLs",level:3},{id:"52-download-handler",title:"5.2 Download Handler",level:3},{id:"environment-variables",title:"Environment Variables",level:2},{id:"frontend-env",title:"Frontend (.env)",level:3},{id:"backend-env",title:"Backend (.env)",level:3},{id:"deployment-checklist",title:"Deployment Checklist",level:2},{id:"aws-cognito-setup",title:"AWS Cognito Setup",level:3},{id:"azure-ad-federation",title:"Azure AD Federation",level:3},{id:"backend",title:"Backend",level:3},{id:"frontend",title:"Frontend",level:3},{id:"testing",title:"Testing",level:3},{id:"next-steps",title:"Next Steps",level:2},{id:"related-documents",title:"Related Documents",level:2}],a=void 0;function l(h){const s={a:"a",blockquote:"blockquote",code:"code",figure:"figure",h1:"h1",h2:"h2",h3:"h3",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...h.components};return i.jsxs(i.Fragment,{children:[i.jsx(s.h1,{id:"implementation-guide",children:"Implementation Guide"}),`
`,i.jsx(s.p,{children:"Step-by-step guide for implementing Data Platform authentication and authorization using AWS Cognito."}),`
`,i.jsx(s.h2,{id:"table-of-contents",children:"Table of Contents"}),`
`,i.jsxs(s.ol,{children:[`
`,i.jsx(s.li,{children:i.jsx(s.a,{href:"#architecture-decision-backend",children:"Architecture Decision: Backend"})}),`
`,i.jsx(s.li,{children:i.jsx(s.a,{href:"#phase-1-aws-cognito-setup",children:"Phase 1: AWS Cognito Setup"})}),`
`,i.jsx(s.li,{children:i.jsx(s.a,{href:"#phase-2-azure-ad-federation",children:"Phase 2: Azure AD Federation"})}),`
`,i.jsx(s.li,{children:i.jsx(s.a,{href:"#phase-3-frontend-authentication-amplify",children:"Phase 3: Frontend Authentication (Amplify)"})}),`
`,i.jsx(s.li,{children:i.jsx(s.a,{href:"#phase-4-backend-api",children:"Phase 4: Backend API"})}),`
`,i.jsx(s.li,{children:i.jsx(s.a,{href:"#phase-5-s3-data-access",children:"Phase 5: S3 Data Access"})}),`
`]}),`
`,i.jsx(s.hr,{}),`
`,i.jsx(s.h2,{id:"architecture-decision-backend",children:"Architecture Decision: Backend"}),`
`,i.jsx(s.h3,{id:"recommendation-serverless-lambda--api-gateway",children:"Recommendation: Serverless (Lambda + API Gateway)"}),`
`,i.jsx(s.p,{children:"For a pilot with ~50 users, serverless is the best approach:"}),`
`,i.jsxs(s.table,{children:[i.jsx(s.thead,{children:i.jsxs(s.tr,{children:[i.jsx(s.th,{children:"Factor"}),i.jsx(s.th,{children:"Serverless (Lambda)"}),i.jsx(s.th,{children:"Containers (ECS)"})]})}),i.jsxs(s.tbody,{children:[i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"Cost"})}),i.jsx(s.td,{children:"Pay per request (~$0 for pilot)"}),i.jsx(s.td,{children:"Always-on (~$50+/month min)"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"Scaling"})}),i.jsx(s.td,{children:"Automatic"}),i.jsx(s.td,{children:"Manual/Auto config needed"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"Complexity"})}),i.jsx(s.td,{children:"Lower"}),i.jsx(s.td,{children:"Higher"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"Cold starts"})}),i.jsx(s.td,{children:"~100-500ms (acceptable)"}),i.jsx(s.td,{children:"None"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"Maintenance"})}),i.jsx(s.td,{children:"Minimal"}),i.jsx(s.td,{children:"Patching, monitoring"})]})]})]}),`
`,i.jsxs(s.p,{children:[i.jsx(s.strong,{children:"Verdict"}),": Use Lambda + API Gateway for pilot. Migrate to ECS if needed later."]}),`
`,i.jsx(s.h3,{id:"proposed-architecture",children:"Proposed Architecture"}),`
`,i.jsx(s.pre,{children:i.jsx(s.code,{children:`┌───────────────────────────────────────────────────────────────┐
│                   DATA PLATFORM ARCHITECTURE                  │
└───────────────────────────────────────────────────────────────┘

                              ┌─────────────────┐
                              │   CloudFront    │
                              │   (CDN + WAF)   │
                              └────────┬────────┘
                                       │
                    ┌──────────────────┼──────────────────┐
                    │                  │                  │
                    ▼                  ▼                  ▼
             ┌───────────┐      ┌───────────┐      ┌───────────┐
             │    S3     │      │    API    │      │    S3     │
             │ (Frontend)│      │  Gateway  │      │  (Data)   │
             └───────────┘      └─────┬─────┘      └───────────┘
                                      │
                         ┌────────────┼────────────┐
                         │            │            │
                         ▼            ▼            ▼
                  ┌───────────┐ ┌───────────┐ ┌───────────┐
                  │  Lambda   │ │  Lambda   │ │  Lambda   │
                  │  (Auth)   │ │ (Datasets)│ │ (Requests)│
                  └─────┬─────┘ └─────┬─────┘ └─────┬─────┘
                        │             │             │
                        └─────────────┼─────────────┘
                                      │
                         ┌────────────┼────────────┐
                         │            │            │
                         ▼            ▼            ▼
                  ┌───────────┐ ┌───────────┐ ┌───────────┐
                  │ DynamoDB  │ │    SES    │ │ CloudWatch│
                  │ (Metadata)│ │  (Email)  │ │  (Logs)   │
                  └───────────┘ └───────────┘ └───────────┘
`})}),`
`,i.jsx(s.hr,{}),`
`,i.jsx(s.h2,{id:"phase-1-aws-cognito-setup",children:"Phase 1: AWS Cognito Setup"}),`
`,i.jsx(s.h3,{id:"11-create-cognito-user-pool",children:"1.1 Create Cognito User Pool"}),`
`,i.jsx(s.p,{children:i.jsx(s.strong,{children:"AWS Console → Cognito → Create user pool"})}),`
`,i.jsxs(s.table,{children:[i.jsx(s.thead,{children:i.jsxs(s.tr,{children:[i.jsx(s.th,{children:"Setting"}),i.jsx(s.th,{children:"Value"})]})}),i.jsxs(s.tbody,{children:[i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"Pool name"}),i.jsx(s.td,{children:i.jsx(s.code,{children:"data-platform-user-pool"})})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"Sign-in options"}),i.jsx(s.td,{children:"Federated identity providers"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"MFA"}),i.jsx(s.td,{children:"Off (handled by Azure AD)"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"Password policy"}),i.jsx(s.td,{children:"Default (users won't use Cognito passwords)"})]})]})]}),`
`,i.jsx(s.h3,{id:"12-configure-app-client",children:"1.2 Configure App Client"}),`
`,i.jsx(s.p,{children:i.jsx(s.strong,{children:"User Pool → App integration → Create app client"})}),`
`,i.jsxs(s.table,{children:[i.jsx(s.thead,{children:i.jsxs(s.tr,{children:[i.jsx(s.th,{children:"Setting"}),i.jsx(s.th,{children:"Value"})]})}),i.jsxs(s.tbody,{children:[i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"App client name"}),i.jsx(s.td,{children:i.jsx(s.code,{children:"data-platform-web-client"})})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"Client secret"}),i.jsx(s.td,{children:"No (public client for SPA)"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"Auth flows"}),i.jsx(s.td,{children:i.jsx(s.code,{children:"ALLOW_REFRESH_TOKEN_AUTH"})})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"OAuth 2.0 grant types"}),i.jsx(s.td,{children:"Authorization code grant"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"OpenID Connect scopes"}),i.jsxs(s.td,{children:[i.jsx(s.code,{children:"openid"}),", ",i.jsx(s.code,{children:"email"}),", ",i.jsx(s.code,{children:"profile"})]})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"Callback URLs"}),i.jsxs(s.td,{children:[i.jsx(s.code,{children:"https://data-platform.example.com/"}),", ",i.jsx(s.code,{children:"http://localhost:5173/"})]})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"Sign-out URLs"}),i.jsxs(s.td,{children:[i.jsx(s.code,{children:"https://data-platform.example.com/"}),", ",i.jsx(s.code,{children:"http://localhost:5173/"})]})]})]})]}),`
`,i.jsx(s.h3,{id:"13-configure-hosted-ui-domain",children:"1.3 Configure Hosted UI Domain"}),`
`,i.jsx(s.p,{children:i.jsx(s.strong,{children:"User Pool → App integration → Domain"})}),`
`,i.jsxs(s.ul,{children:[`
`,i.jsx(s.li,{children:"Choose: Cognito domain or custom domain"}),`
`,i.jsxs(s.li,{children:["Example: ",i.jsx(s.code,{children:"data-platform-auth.auth.ap-southeast-1.amazoncognito.com"})]}),`
`]}),`
`,i.jsx(s.h3,{id:"14-create-cognito-identity-pool",children:"1.4 Create Cognito Identity Pool"}),`
`,i.jsx(s.p,{children:i.jsx(s.strong,{children:"AWS Console → Cognito → Identity pools → Create identity pool"})}),`
`,i.jsxs(s.table,{children:[i.jsx(s.thead,{children:i.jsxs(s.tr,{children:[i.jsx(s.th,{children:"Setting"}),i.jsx(s.th,{children:"Value"})]})}),i.jsxs(s.tbody,{children:[i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"Identity pool name"}),i.jsx(s.td,{children:i.jsx(s.code,{children:"data-platform-identity-pool"})})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"Unauthenticated access"}),i.jsx(s.td,{children:"Disabled"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"Authentication providers"}),i.jsx(s.td,{children:"Cognito User Pool"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"User Pool ID"}),i.jsx(s.td,{children:i.jsx(s.code,{children:"<from step 1.1>"})})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"App Client ID"}),i.jsx(s.td,{children:i.jsx(s.code,{children:"<from step 1.2>"})})]})]})]}),`
`,i.jsx(s.h3,{id:"15-configure-iam-roles-for-identity-pool",children:"1.5 Configure IAM Roles for Identity Pool"}),`
`,i.jsx(s.p,{children:i.jsx(s.strong,{children:"Identity Pool → Edit → Authentication providers → Authenticated role"})}),`
`,i.jsx(s.p,{children:"Create two IAM roles:"}),`
`,i.jsx(s.p,{children:i.jsx(s.strong,{children:"Role: data-platform-authenticated-user"})}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{style:{"--shiki-dark":"#e6edf3","--shiki-light":"#D4D4D4","--shiki-dark-bg":"#0d1117","--shiki-light-bg":"#1E1E1E"},tabIndex:"0","data-language":"json","data-theme":"github-dark-default dark-plus",children:i.jsxs(s.code,{"data-language":"json","data-theme":"github-dark-default dark-plus",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"{"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#9CDCFE"},children:'  "Version"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:'"2012-10-17"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#9CDCFE"},children:'  "Statement"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": ["})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"    {"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#9CDCFE"},children:'      "Effect"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:'"Allow"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#9CDCFE"},children:'      "Action"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": ["})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:'        "execute-api:Invoke"'})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"      ],"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#9CDCFE"},children:'      "Resource"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:'"arn:aws:execute-api:*:*:*"'})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"    },"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"    {"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#9CDCFE"},children:'      "Effect"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:'"Allow"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#9CDCFE"},children:'      "Action"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": ["})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:'        "s3:GetObject"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:'        "s3:ListBucket"'})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"      ],"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#9CDCFE"},children:'      "Resource"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": ["})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:'        "arn:aws:s3:::data-platform-data-${aws:PrincipalTag/department}/*"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:'        "arn:aws:s3:::data-platform-data-${aws:PrincipalTag/department}"'})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"      ]"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"    }"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  ]"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"}"})})]})})}),`
`,i.jsx(s.p,{children:i.jsx(s.strong,{children:"Trust Policy for IAM Role:"})}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{style:{"--shiki-dark":"#e6edf3","--shiki-light":"#D4D4D4","--shiki-dark-bg":"#0d1117","--shiki-light-bg":"#1E1E1E"},tabIndex:"0","data-language":"json","data-theme":"github-dark-default dark-plus",children:i.jsxs(s.code,{"data-language":"json","data-theme":"github-dark-default dark-plus",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"{"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#9CDCFE"},children:'  "Version"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:'"2012-10-17"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#9CDCFE"},children:'  "Statement"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": ["})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"    {"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#9CDCFE"},children:'      "Effect"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:'"Allow"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#9CDCFE"},children:'      "Principal"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#9CDCFE"},children:'        "Federated"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:'"cognito-identity.amazonaws.com"'})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"      },"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#9CDCFE"},children:'      "Action"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:'"sts:AssumeRoleWithWebIdentity"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#9CDCFE"},children:'      "Condition"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#9CDCFE"},children:'        "StringEquals"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#9CDCFE"},children:'          "cognito-identity.amazonaws.com:aud"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:'"<identity-pool-id>"'})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"        },"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#9CDCFE"},children:'        "ForAnyValue:StringLike"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#9CDCFE"},children:'          "cognito-identity.amazonaws.com:amr"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:'"authenticated"'})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"        }"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"      }"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"    }"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  ]"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"}"})})]})})}),`
`,i.jsx(s.h3,{id:"16-note-key-values",children:"1.6 Note Key Values"}),`
`,i.jsx(s.p,{children:"Record these for later configuration:"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{style:{"--shiki-dark":"#e6edf3","--shiki-light":"#D4D4D4","--shiki-dark-bg":"#0d1117","--shiki-light-bg":"#1E1E1E"},tabIndex:"0","data-language":"bash","data-theme":"github-dark-default dark-plus",children:i.jsxs(s.code,{"data-language":"bash","data-theme":"github-dark-default dark-plus",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"# Cognito User Pool"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"VITE_COGNITO_USER_POOL_ID"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"ap-southeast-1_XXXXXXXXX"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"VITE_COGNITO_CLIENT_ID"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"XXXXXXXXXXXXXXXXXXXXXXXXXX"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"VITE_COGNITO_DOMAIN"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"data-platform-auth.auth.ap-southeast-1.amazoncognito.com"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"# Cognito Identity Pool"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"VITE_COGNITO_IDENTITY_POOL_ID"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"ap-southeast-1:xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"# Region"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"VITE_AWS_REGION"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"ap-southeast-1"})]})]})})}),`
`,i.jsx(s.hr,{}),`
`,i.jsx(s.h2,{id:"phase-2-azure-ad-federation",children:"Phase 2: Azure AD Federation"}),`
`,i.jsx(s.h3,{id:"21-create-app-registration-in-azure-ad",children:"2.1 Create App Registration in Azure AD"}),`
`,i.jsx(s.p,{children:i.jsx(s.strong,{children:"Azure Portal → Azure Active Directory → App registrations → New registration"})}),`
`,i.jsxs(s.table,{children:[i.jsx(s.thead,{children:i.jsxs(s.tr,{children:[i.jsx(s.th,{children:"Field"}),i.jsx(s.th,{children:"Value"})]})}),i.jsxs(s.tbody,{children:[i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"Name"}),i.jsx(s.td,{children:i.jsx(s.code,{children:"Data Platform (Cognito)"})})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"Supported account types"}),i.jsx(s.td,{children:"Single tenant (Client Organization only)"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"Redirect URI (Web)"}),i.jsx(s.td,{children:i.jsx(s.code,{children:"https://<cognito-domain>/oauth2/idpresponse"})})]})]})]}),`
`,i.jsx(s.h3,{id:"22-configure-api-permissions",children:"2.2 Configure API Permissions"}),`
`,i.jsx(s.p,{children:i.jsx(s.strong,{children:"App registration → API permissions → Add permission"})}),`
`,i.jsxs(s.table,{children:[i.jsx(s.thead,{children:i.jsxs(s.tr,{children:[i.jsx(s.th,{children:"API"}),i.jsx(s.th,{children:"Permission"}),i.jsx(s.th,{children:"Type"})]})}),i.jsxs(s.tbody,{children:[i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"Microsoft Graph"}),i.jsx(s.td,{children:i.jsx(s.code,{children:"openid"})}),i.jsx(s.td,{children:"Delegated"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"Microsoft Graph"}),i.jsx(s.td,{children:i.jsx(s.code,{children:"email"})}),i.jsx(s.td,{children:"Delegated"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"Microsoft Graph"}),i.jsx(s.td,{children:i.jsx(s.code,{children:"profile"})}),i.jsx(s.td,{children:"Delegated"})]})]})]}),`
`,i.jsxs(s.p,{children:[i.jsx(s.strong,{children:"Grant admin consent"})," after adding permissions."]}),`
`,i.jsx(s.h3,{id:"23-create-client-secret",children:"2.3 Create Client Secret"}),`
`,i.jsx(s.p,{children:i.jsx(s.strong,{children:"App registration → Certificates & secrets → New client secret"})}),`
`,i.jsxs(s.ul,{children:[`
`,i.jsxs(s.li,{children:["Description: ",i.jsx(s.code,{children:"Cognito Federation"})]}),`
`,i.jsx(s.li,{children:"Expires: 24 months"}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"Save the secret value immediately"})," (shown only once)"]}),`
`]}),`
`,i.jsx(s.h3,{id:"24-note-azure-ad-values",children:"2.4 Note Azure AD Values"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{style:{"--shiki-dark":"#e6edf3","--shiki-light":"#D4D4D4","--shiki-dark-bg":"#0d1117","--shiki-light-bg":"#1E1E1E"},tabIndex:"0","data-language":"bash","data-theme":"github-dark-default dark-plus",children:i.jsxs(s.code,{"data-language":"bash","data-theme":"github-dark-default dark-plus",style:{display:"grid"},children:[i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"AZURE_AD_TENANT_ID"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"=<"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"Directory"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#DCDCAA"},children:" (tenant"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:") ID"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:">"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"AZURE_AD_CLIENT_ID"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"=<"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"Application"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#DCDCAA"},children:" (client"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:") ID"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:">"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"AZURE_AD_CLIENT_SECRET"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"=<"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"Secret"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#DCDCAA"},children:" value"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:">"})]})]})})}),`
`,i.jsx(s.h3,{id:"25-configure-azure-ad-as-idp-in-cognito",children:"2.5 Configure Azure AD as IdP in Cognito"}),`
`,i.jsx(s.p,{children:i.jsx(s.strong,{children:"Cognito User Pool → Sign-in experience → Federated identity provider sign-in → Add identity provider"})}),`
`,i.jsxs(s.table,{children:[i.jsx(s.thead,{children:i.jsxs(s.tr,{children:[i.jsx(s.th,{children:"Setting"}),i.jsx(s.th,{children:"Value"})]})}),i.jsxs(s.tbody,{children:[i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"Provider type"}),i.jsx(s.td,{children:"OpenID Connect"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"Provider name"}),i.jsx(s.td,{children:i.jsx(s.code,{children:"AzureAD"})})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"Client ID"}),i.jsx(s.td,{children:i.jsx(s.code,{children:"<Azure AD Application ID>"})})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"Client secret"}),i.jsx(s.td,{children:i.jsx(s.code,{children:"<Azure AD Client Secret>"})})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"Authorized scopes"}),i.jsx(s.td,{children:i.jsx(s.code,{children:"openid email profile"})})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"Issuer URL"}),i.jsx(s.td,{children:i.jsx(s.code,{children:"https://login.microsoftonline.com/<tenant-id>/v2.0"})})]})]})]}),`
`,i.jsx(s.h3,{id:"26-configure-attribute-mapping",children:"2.6 Configure Attribute Mapping"}),`
`,i.jsx(s.p,{children:i.jsx(s.strong,{children:"Identity provider → Attribute mapping"})}),`
`,i.jsxs(s.table,{children:[i.jsx(s.thead,{children:i.jsxs(s.tr,{children:[i.jsx(s.th,{children:"Cognito attribute"}),i.jsx(s.th,{children:"Azure AD claim"})]})}),i.jsxs(s.tbody,{children:[i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.code,{children:"email"})}),i.jsx(s.td,{children:i.jsx(s.code,{children:"email"})})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.code,{children:"name"})}),i.jsx(s.td,{children:i.jsx(s.code,{children:"name"})})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.code,{children:"preferred_username"})}),i.jsx(s.td,{children:i.jsx(s.code,{children:"preferred_username"})})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.code,{children:"custom:groups"})}),i.jsxs(s.td,{children:[i.jsx(s.code,{children:"groups"})," (if using group claims)"]})]})]})]}),`
`,i.jsx(s.h3,{id:"27-enable-azure-ad-in-app-client",children:"2.7 Enable Azure AD in App Client"}),`
`,i.jsx(s.p,{children:i.jsx(s.strong,{children:"User Pool → App integration → App client → Edit hosted UI"})}),`
`,i.jsxs(s.ul,{children:[`
`,i.jsxs(s.li,{children:["Identity providers: Select ",i.jsx(s.code,{children:"AzureAD"})]}),`
`,i.jsx(s.li,{children:"Save changes"}),`
`]}),`
`,i.jsx(s.h3,{id:"28-configure-conditional-access-mfa-in-azure-ad",children:"2.8 Configure Conditional Access (MFA) in Azure AD"}),`
`,i.jsx(s.p,{children:i.jsx(s.strong,{children:"Azure AD → Security → Conditional Access → New policy"})}),`
`,i.jsxs(s.table,{children:[i.jsx(s.thead,{children:i.jsxs(s.tr,{children:[i.jsx(s.th,{children:"Setting"}),i.jsx(s.th,{children:"Value"})]})}),i.jsxs(s.tbody,{children:[i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"Name"}),i.jsx(s.td,{children:i.jsx(s.code,{children:"Data Platform - Require MFA"})})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"Users"}),i.jsx(s.td,{children:"All users (or specific group)"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"Cloud apps"}),i.jsx(s.td,{children:i.jsx(s.code,{children:"Data Platform (Cognito)"})})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"Grant"}),i.jsx(s.td,{children:"Require multi-factor authentication"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"Enable policy"}),i.jsx(s.td,{children:"On"})]})]})]}),`
`,i.jsx(s.hr,{}),`
`,i.jsx(s.h2,{id:"phase-3-frontend-authentication-amplify",children:"Phase 3: Frontend Authentication (Amplify)"}),`
`,i.jsx(s.h3,{id:"31-install-dependencies",children:"3.1 Install Dependencies"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{style:{"--shiki-dark":"#e6edf3","--shiki-light":"#D4D4D4","--shiki-dark-bg":"#0d1117","--shiki-light-bg":"#1E1E1E"},tabIndex:"0","data-language":"bash","data-theme":"github-dark-default dark-plus",children:i.jsx(s.code,{"data-language":"bash","data-theme":"github-dark-default dark-plus",style:{display:"grid"},children:i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#DCDCAA"},children:"pnpm"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" add"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" aws-amplify"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" @aws-amplify/ui-react"})]})})})}),`
`,i.jsx(s.h3,{id:"32-amplify-configuration",children:"3.2 Amplify Configuration"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{style:{"--shiki-dark":"#e6edf3","--shiki-light":"#D4D4D4","--shiki-dark-bg":"#0d1117","--shiki-light-bg":"#1E1E1E"},tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default dark-plus",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default dark-plus",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"// src/auth/amplifyConfig.ts"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"Amplify"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" 'aws-amplify'"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"Amplify"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:"configure"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"({"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"  Auth:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"    Cognito:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"      userPoolId:"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:" import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#9CDCFE"},children:"meta"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"env"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:"VITE_COGNITO_USER_POOL_ID"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"      userPoolClientId:"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:" import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#9CDCFE"},children:"meta"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"env"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:"VITE_COGNITO_CLIENT_ID"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"      identityPoolId:"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:" import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#9CDCFE"},children:"meta"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"env"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:"VITE_COGNITO_IDENTITY_POOL_ID"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"      loginWith:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"        oauth:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"          domain:"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:" import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#9CDCFE"},children:"meta"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"env"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:"VITE_COGNITO_DOMAIN"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"          scopes:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" ["}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"'openid'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"'email'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"'profile'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"],"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"          redirectSignIn:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" ["}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"window"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"location"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"origin"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"],"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"          redirectSignOut:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" ["}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"window"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"location"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"origin"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"],"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"          responseType:"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" 'code'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"          providers:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" ["}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"'AzureAD'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"], "}),i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"// Name of the IdP configured in Cognito"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"        },"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"      },"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"    },"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  },"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"})"})})]})})}),`
`,i.jsx(s.h3,{id:"33-auth-provider-setup",children:"3.3 Auth Provider Setup"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{style:{"--shiki-dark":"#e6edf3","--shiki-light":"#D4D4D4","--shiki-dark-bg":"#0d1117","--shiki-light-bg":"#1E1E1E"},tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default dark-plus",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default dark-plus",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"// src/main.tsx"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"Authenticator"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" '@aws-amplify/ui-react'"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" '@aws-amplify/ui-react/styles.css'"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" './auth/amplifyConfig'"}),i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:" // Initialize Amplify"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"ReactDOM"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:"createRoot"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"document"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:"getElementById"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"'root'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:")"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"!"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:")."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:"render"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"("})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"  <"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"React"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"StrictMode"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:">"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"    <"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"Authenticator"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"Provider"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:">"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"      <"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"App"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" />"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"    </"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"Authenticator"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"Provider"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:">"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"  </"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"React"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"StrictMode"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:">"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:")"})})]})})}),`
`,i.jsx(s.h3,{id:"34-auth-hook",children:"3.4 Auth Hook"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{style:{"--shiki-dark":"#e6edf3","--shiki-light":"#D4D4D4","--shiki-dark-bg":"#0d1117","--shiki-light-bg":"#1E1E1E"},tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default dark-plus",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default dark-plus",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"// src/auth/useAuth.ts"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"useState"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"useEffect"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" 'react'"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" { "})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"  getCurrentUser"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:", "})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"  signInWithRedirect"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:", "})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"  signOut"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"  fetchAuthSession"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"  AuthUser"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"} "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" 'aws-amplify/auth'"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"export"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:" function"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" useAuth"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"() {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"  const"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" ["}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:"user"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:"setUser"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"] "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" useState"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"<"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#4EC9B0"},children:"AuthUser"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" |"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4EC9B0"},children:" null"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:">("}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#569CD6"},children:"null"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:")"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"  const"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" ["}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:"isLoading"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:"setIsLoading"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"] "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" useState"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#569CD6"},children:"true"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:")"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:"  useEffect"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"(() "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"=>"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:"    checkUser"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"()"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  }, [])"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"  async"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:" function"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" checkUser"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"() {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"    try"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"      const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:" currentUser"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:" await"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" getCurrentUser"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"()"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:"      setUser"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"currentUser"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:")"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"    } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"catch"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:"      setUser"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#569CD6"},children:"null"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:")"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"    } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"finally"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:"      setIsLoading"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#569CD6"},children:"false"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:")"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"    }"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  }"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"  const"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" login"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:" async"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" () "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"=>"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"    await"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" signInWithRedirect"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"({ "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"provider:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"custom:"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" 'AzureAD'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" } })"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  }"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"  const"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" logout"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:" async"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" () "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"=>"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"    await"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" signOut"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"()"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:"    setUser"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#569CD6"},children:"null"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:")"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  }"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"  const"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" getSession"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:" async"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" () "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"=>"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"    try"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"      const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:" session"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:" await"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" fetchAuthSession"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"()"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"      return"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" session"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"    } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"catch"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"      return"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#569CD6"},children:" null"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"    }"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  }"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"  // Get AWS credentials for direct S3 access"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"  const"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" getCredentials"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:" async"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" () "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"=>"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"    const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:" session"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:" await"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" getSession"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"()"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"    return"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" session"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"?."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"credentials"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" ??"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#569CD6"},children:" null"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  }"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"  // Get ID token for API calls"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"  const"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" getIdToken"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:" async"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" () "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"=>"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"    const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:" session"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:" await"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" getSession"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"()"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"    return"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" session"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"?."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"tokens"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"?."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"idToken"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"?."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:"toString"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"() "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"??"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#569CD6"},children:" null"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  }"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"  return"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"    user"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"    isAuthenticated:"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" !!"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"user"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"    isLoading"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"    login"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"    logout"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"    getSession"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"    getCredentials"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"    getIdToken"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  }"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"}"})})]})})}),`
`,i.jsx(s.h3,{id:"35-protected-route-component",children:"3.5 Protected Route Component"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{style:{"--shiki-dark":"#e6edf3","--shiki-light":"#D4D4D4","--shiki-dark-bg":"#0d1117","--shiki-light-bg":"#1E1E1E"},tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default dark-plus",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default dark-plus",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"// src/auth/ProtectedRoute.tsx"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"Navigate"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"Outlet"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" '@tanstack/react-router'"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"useAuth"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" './useAuth'"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"export"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:" function"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" ProtectedRoute"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"() {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"  const"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:"isAuthenticated"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:"isLoading"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" useAuth"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"()"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"  if"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" ("}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"isLoading"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:") {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"    return"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" <"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#4EC9B0"},children:"div"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:">"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"Loading"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"...</"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"div"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:">"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  }"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"  if"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" ("}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"!"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"isAuthenticated"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:") {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"    return"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" <"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#4EC9B0"},children:"Navigate"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#4EC9B0"},children:" to"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:'"/login"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" />"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  }"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  return <"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#4EC9B0"},children:"Outlet"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" />"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"}"})})]})})}),`
`,i.jsx(s.h3,{id:"36-login-page-with-federated-sign-in",children:"3.6 Login Page with Federated Sign-In"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{style:{"--shiki-dark":"#e6edf3","--shiki-light":"#D4D4D4","--shiki-dark-bg":"#0d1117","--shiki-light-bg":"#1E1E1E"},tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default dark-plus",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default dark-plus",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"// src/routes/login.tsx"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"useAuth"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" '../auth/useAuth'"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"Navigate"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" '@tanstack/react-router'"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"export"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:" function"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" LoginPage"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"() {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"  const"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:"isAuthenticated"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:"login"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:"isLoading"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" useAuth"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"()"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"  if"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" ("}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"isLoading"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:") {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"    return"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" <"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#4EC9B0"},children:"div"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:">"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"Loading"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"...</"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"div"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:">"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  }"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"  if"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" ("}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"isAuthenticated"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:") {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"    return"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" <"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#4EC9B0"},children:"Navigate"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#4EC9B0"},children:" to"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:'"/"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" />"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  }"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  return ("})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"    <"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"div"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" className"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:'"min-h-screen flex items-center justify-center bg-gray-50"'}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:">"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"      <"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"div"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" className"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:'"max-w-md w-full space-y-8 p-8 bg-white rounded-lg shadow"'}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:">"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"        <"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"div"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" className"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:'"text-center"'}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:">"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"          <"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"h2"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" className"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:'"text-3xl font-bold text-gray-900"'}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:">"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"Data"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" Platform"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"</"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"h2"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:">"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"          <"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"p"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" className"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:'"mt-2 text-gray-600"'}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:">"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"Sign"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:" in"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" to"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" access"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" datasets"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"</"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"p"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:">"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"        </"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"div"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:">"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"        <"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#9CDCFE"},children:"button"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"          onClick"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"{"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"login"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"}"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"          className"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:'"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"'})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"        >"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"          Sign"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:" in"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" with"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" Azure"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#9CDCFE"},children:" AD"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"        </"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"button"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:">"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"      </"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"div"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:">"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"    </"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"div"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:">"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  )"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"}"})})]})})}),`
`,i.jsx(s.h3,{id:"37-api-client-with-auth",children:"3.7 API Client with Auth"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{style:{"--shiki-dark":"#e6edf3","--shiki-light":"#D4D4D4","--shiki-dark-bg":"#0d1117","--shiki-light-bg":"#1E1E1E"},tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default dark-plus",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default dark-plus",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"// src/api/client.ts"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"useAuth"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" '../auth/useAuth'"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"useQuery"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"useMutation"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" '@tanstack/react-query'"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:" API_BASE"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:" import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#9CDCFE"},children:"meta"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"env"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:"VITE_API_URL"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"async"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:" function"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" fetchWithAuth"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"("})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#9CDCFE"},children:"  path"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4EC9B0"},children:" string"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:"  getToken"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" () "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"=>"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#4EC9B0"},children:" Promise"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"<"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4EC9B0"},children:"string"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" |"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4EC9B0"},children:" null"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:">,"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#9CDCFE"},children:"  options"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#4EC9B0"},children:" RequestInit"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" {}"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:") {"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"  const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:" token"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:" await"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" getToken"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"()"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  "})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"  if"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" ("}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"!"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"token"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:") {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"    throw"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:" new"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" Error"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"'Not authenticated'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:")"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  }"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"  const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:" response"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:" await"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" fetch"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"`"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#569CD6"},children:"${"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:"API_BASE"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#569CD6"},children:"}${"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"path"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#569CD6"},children:"}"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"`"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:", {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"    ..."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"options"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"    headers:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"      ..."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"options"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"headers"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"      'Authorization'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" `Bearer "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#569CD6"},children:"${"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"token"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#569CD6"},children:"}"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"`"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"      'Content-Type'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" 'application/json'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"    },"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  })"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"  if"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" ("}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"!"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"response"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"ok"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:") {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"    throw"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:" new"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" Error"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"`API error: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#569CD6"},children:"${"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"response"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"status"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#569CD6"},children:"}"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"`"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:")"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  }"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"  return"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" response"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:"json"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"()"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"}"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"// Example: useDatasets hook"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"export"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:" function"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" useDatasets"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"() {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"  const"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:"getIdToken"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" useAuth"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"()"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"  return"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" useQuery"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"({"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"    queryKey:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" ["}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"'datasets'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"],"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:"    queryFn"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" () "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"=>"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" fetchWithAuth"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"'/datasets'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"getIdToken"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"),"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  })"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"}"})})]})})}),`
`,i.jsx(s.hr,{}),`
`,i.jsx(s.h2,{id:"phase-4-backend-api",children:"Phase 4: Backend API"}),`
`,i.jsx(s.h3,{id:"41-project-structure-lambda",children:"4.1 Project Structure (Lambda)"}),`
`,i.jsx(s.pre,{children:i.jsx(s.code,{children:`backend/
├── src/
│   ├── handlers/
│   │   ├── auth.ts
│   │   ├── datasets.ts
│   │   └── requests.ts
│   ├── middleware/
│   │   └── authMiddleware.ts
│   ├── services/
│   │   ├── s3Service.ts
│   │   └── dynamoService.ts
│   └── utils/
│       └── tokenValidator.ts
├── serverless.yml
├── package.json
└── tsconfig.json
`})}),`
`,i.jsx(s.h3,{id:"42-token-validation-middleware",children:"4.2 Token Validation Middleware"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{style:{"--shiki-dark":"#e6edf3","--shiki-light":"#D4D4D4","--shiki-dark-bg":"#0d1117","--shiki-light-bg":"#1E1E1E"},tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default dark-plus",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default dark-plus",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"// src/middleware/authMiddleware.ts"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"APIGatewayProxyEvent"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" 'aws-lambda'"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"CognitoJwtVerifier"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" 'aws-jwt-verify'"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"// Create verifier for Cognito User Pool tokens"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:" verifier"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" CognitoJwtVerifier"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:"create"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"({"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"  userPoolId:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" process"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"env"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:"COGNITO_USER_POOL_ID"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"!"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"  tokenUse:"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" 'id'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"// or 'access' depending on which token you send"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"  clientId:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" process"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"env"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:"COGNITO_CLIENT_ID"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"!"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"})"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"export"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:" async"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:" function"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" validateToken"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#9CDCFE"},children:"event"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#4EC9B0"},children:" APIGatewayProxyEvent"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:") {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"  const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:" authHeader"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" event"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"headers"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"Authorization"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" ||"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" event"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"headers"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"authorization"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  "})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"  if"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" ("}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"!"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"authHeader"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"?."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:"startsWith"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"'Bearer '"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:")) {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"    throw"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:" new"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" Error"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"'Missing or invalid authorization header'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:")"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  }"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"  const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:" token"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" authHeader"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:"substring"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#B5CEA8"},children:"7"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:")"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"  try"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"    const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:" payload"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:" await"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" verifier"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:"verify"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"token"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:")"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"    return"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"      sub:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" payload"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"sub"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"      email:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" payload"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"email"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"      groups:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" payload"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"["}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"'cognito:groups'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"] "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"||"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" [],"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"      // Custom attributes from Azure AD mapping"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"      name:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" payload"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"name"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"    }"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"catch"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" ("}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"error"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:") {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"    throw"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:" new"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" Error"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"'Invalid token'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:")"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  }"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"}"})})]})})}),`
`,i.jsxs(s.blockquote,{children:[`
`,i.jsxs(s.p,{children:[i.jsx(s.strong,{children:"Note"}),": Install ",i.jsx(s.code,{children:"aws-jwt-verify"})," package: ",i.jsx(s.code,{children:"pnpm add aws-jwt-verify"})]}),`
`]}),`
`,i.jsx(s.h3,{id:"43-serverless-configuration",children:"4.3 Serverless Configuration"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{style:{"--shiki-dark":"#e6edf3","--shiki-light":"#D4D4D4","--shiki-dark-bg":"#0d1117","--shiki-light-bg":"#1E1E1E"},tabIndex:"0","data-language":"yaml","data-theme":"github-dark-default dark-plus",children:i.jsxs(s.code,{"data-language":"yaml","data-theme":"github-dark-default dark-plus",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"# serverless.yml"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"service"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"data-platform-api"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"provider"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:":"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"  name"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"aws"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"  runtime"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"nodejs20.x"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"  region"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"ap-southeast-1"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"  environment"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:":"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"    COGNITO_USER_POOL_ID"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"${env:COGNITO_USER_POOL_ID}"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"    COGNITO_CLIENT_ID"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"${env:COGNITO_CLIENT_ID}"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"    DATA_BUCKET"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"${self:custom.dataBucket}"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"    METADATA_TABLE"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"${self:custom.metadataTable}"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"  iam"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:":"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"    role"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:":"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"      statements"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:":"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"        - "}),i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"Effect"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"Allow"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"          Action"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:":"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"            - "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"s3:GetObject"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"            - "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"s3:PutObject"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"          Resource"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"arn:aws:s3:::${self:custom.dataBucket}/*"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"        - "}),i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"Effect"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"Allow"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"          Action"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:":"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"            - "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"dynamodb:GetItem"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"            - "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"dynamodb:PutItem"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"            - "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"dynamodb:Query"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"            - "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"dynamodb:UpdateItem"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"          Resource"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"arn:aws:dynamodb:*:*:table/${self:custom.metadataTable}"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"custom"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:":"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"  dataBucket"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"data-platform-data-${self:provider.stage}"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"  metadataTable"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"data-platform-metadata-${self:provider.stage}"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"functions"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:":"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"  getDatasets"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:":"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"    handler"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"src/handlers/datasets.list"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"    events"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:":"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"      - "}),i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"http"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:":"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"          path"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"/datasets"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"          method"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"get"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"          cors"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#569CD6"},children:"true"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"          authorizer"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:":"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"            type"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"REQUEST"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"            identitySource"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"method.request.header.Authorization"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"  getDataset"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:":"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"    handler"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"src/handlers/datasets.get"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"    events"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:":"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"      - "}),i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"http"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:":"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"          path"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"/datasets/{id}"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"          method"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"get"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"          cors"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#569CD6"},children:"true"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"  requestAccess"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:":"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"    handler"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"src/handlers/requests.create"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"    events"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:":"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"      - "}),i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"http"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:":"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"          path"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"/requests"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"          method"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"post"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"          cors"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#569CD6"},children:"true"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"  approveRequest"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:":"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"    handler"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"src/handlers/requests.approve"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"    events"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:":"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"      - "}),i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"http"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:":"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"          path"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"/requests/{id}/approve"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"          method"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"post"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#569CD6"},children:"          cors"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#569CD6"},children:"true"})]})]})})}),`
`,i.jsx(s.hr,{}),`
`,i.jsx(s.h2,{id:"phase-5-s3-data-access",children:"Phase 5: S3 Data Access"}),`
`,i.jsx(s.h3,{id:"51-generate-pre-signed-urls",children:"5.1 Generate Pre-signed URLs"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{style:{"--shiki-dark":"#e6edf3","--shiki-light":"#D4D4D4","--shiki-dark-bg":"#0d1117","--shiki-light-bg":"#1E1E1E"},tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default dark-plus",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default dark-plus",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"// src/services/s3Service.ts"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"S3Client"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"GetObjectCommand"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" '@aws-sdk/client-s3'"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"getSignedUrl"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" '@aws-sdk/s3-request-presigner'"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:" s3Client"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:" new"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" S3Client"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"({ "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"region:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" process"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"env"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:"AWS_REGION"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" })"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"export"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:" async"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:" function"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" generateDownloadUrl"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"("})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#9CDCFE"},children:"  bucket"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4EC9B0"},children:" string"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#9CDCFE"},children:"  key"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4EC9B0"},children:" string"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#9CDCFE"},children:"  expiresIn"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4EC9B0"},children:" number"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#B5CEA8"},children:" 3600"}),i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:" // 1 hour"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:")"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#4EC9B0"},children:" Promise"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"<"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4EC9B0"},children:"string"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"> {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"  const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:" command"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:" new"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" GetObjectCommand"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"({"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"    Bucket:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" bucket"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"    Key:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" key"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  })"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"  return"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" getSignedUrl"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"s3Client"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"command"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:", { "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"expiresIn"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" })"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"}"})})]})})}),`
`,i.jsx(s.h3,{id:"52-download-handler",children:"5.2 Download Handler"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{style:{"--shiki-dark":"#e6edf3","--shiki-light":"#D4D4D4","--shiki-dark-bg":"#0d1117","--shiki-light-bg":"#1E1E1E"},tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default dark-plus",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default dark-plus",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"// src/handlers/datasets.ts"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"APIGatewayProxyHandler"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" 'aws-lambda'"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"validateToken"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" '../middleware/authMiddleware'"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"generateDownloadUrl"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" '../services/s3Service'"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"checkUserAccess"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" '../services/dynamoService'"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"export"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:" const"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" download"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#4EC9B0"},children:" APIGatewayProxyHandler"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:" async"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" ("}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#9CDCFE"},children:"event"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:") "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"=>"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"  try"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" {"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"    // 1. Validate token"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"    const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:" user"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:" await"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" validateToken"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"event"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:")"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"    "})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"    // 2. Get dataset ID"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"    const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:" datasetId"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" event"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"pathParameters"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"?."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"id"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"    if"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" ("}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"!"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"datasetId"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:") {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"      return"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"statusCode:"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#B5CEA8"},children:" 400"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"body:"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" 'Missing dataset ID'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" }"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"    }"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"    // 3. Check if user has approved access"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"    const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:" hasAccess"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:" await"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" checkUserAccess"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"user"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"email"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"datasetId"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:")"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"    if"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" ("}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"!"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"hasAccess"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:") {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"      return"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" { "})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"        statusCode:"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#B5CEA8"},children:" 403"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:", "})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"        body:"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:" JSON"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:"stringify"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"({ "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"error:"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" 'Access not approved'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" })"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"      }"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"    }"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"    // 4. Generate pre-signed URL"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:"    const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:" url"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:" await"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" generateDownloadUrl"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"("})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"      process"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"env"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:"DATA_BUCKET"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"!"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"      `datasets/"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#569CD6"},children:"${"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"datasetId"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#569CD6"},children:"}"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"/data.csv`"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"    )"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"    // 5. Log access event"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"    console"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:"log"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:"JSON"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:"stringify"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"({"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"      event:"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" 'DATA_DOWNLOAD'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"      user:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" user"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"email"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"      dataset:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" datasetId"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"      timestamp:"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#569CD6"},children:" new"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:" Date"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"()."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:"toISOString"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"(),"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"    }))"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"    return"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"      statusCode:"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#B5CEA8"},children:" 200"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"      headers:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"'Content-Type'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" 'application/json'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" },"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"      body:"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:" JSON"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:"stringify"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"({ "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"downloadUrl:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:" url"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" }),"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"    }"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"catch"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" ("}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"error"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:") {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"    console"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:"error"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"'Download error:'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"error"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:")"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#C586C0"},children:"    return"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"      statusCode:"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#B5CEA8"},children:" 500"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"      body:"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#4FC1FF"},children:" JSON"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#DCDCAA"},children:"stringify"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"({ "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"error:"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:" 'Internal server error'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:" }),"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"    }"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"  }"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#D4D4D4"},children:"}"})})]})})}),`
`,i.jsx(s.hr,{}),`
`,i.jsx(s.h2,{id:"environment-variables",children:"Environment Variables"}),`
`,i.jsx(s.h3,{id:"frontend-env",children:"Frontend (.env)"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{style:{"--shiki-dark":"#e6edf3","--shiki-light":"#D4D4D4","--shiki-dark-bg":"#0d1117","--shiki-light-bg":"#1E1E1E"},tabIndex:"0","data-language":"bash","data-theme":"github-dark-default dark-plus",children:i.jsxs(s.code,{"data-language":"bash","data-theme":"github-dark-default dark-plus",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"# Cognito User Pool"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"VITE_COGNITO_USER_POOL_ID"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"ap-southeast-1_XXXXXXXXX"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"VITE_COGNITO_CLIENT_ID"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"XXXXXXXXXXXXXXXXXXXXXXXXXX"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"VITE_COGNITO_DOMAIN"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"data-platform-auth.auth.ap-southeast-1.amazoncognito.com"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"# Cognito Identity Pool"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"VITE_COGNITO_IDENTITY_POOL_ID"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"ap-southeast-1:xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"# Region & API"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"VITE_AWS_REGION"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"ap-southeast-1"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"VITE_API_URL"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"https://api.data-platform.example.com"})]})]})})}),`
`,i.jsx(s.h3,{id:"backend-env",children:"Backend (.env)"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{style:{"--shiki-dark":"#e6edf3","--shiki-light":"#D4D4D4","--shiki-dark-bg":"#0d1117","--shiki-light-bg":"#1E1E1E"},tabIndex:"0","data-language":"bash","data-theme":"github-dark-default dark-plus",children:i.jsxs(s.code,{"data-language":"bash","data-theme":"github-dark-default dark-plus",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"# Cognito"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"COGNITO_USER_POOL_ID"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"ap-southeast-1_XXXXXXXXX"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"COGNITO_CLIENT_ID"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"XXXXXXXXXXXXXXXXXXXXXXXXXX"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6A9955"},children:"# Resources"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"DATA_BUCKET"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"data-platform-data-prod"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#9CDCFE"},children:"METADATA_TABLE"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#D4D4D4"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#CE9178"},children:"data-platform-metadata-prod"})]})]})})}),`
`,i.jsx(s.hr,{}),`
`,i.jsx(s.h2,{id:"deployment-checklist",children:"Deployment Checklist"}),`
`,i.jsx(s.h3,{id:"aws-cognito-setup",children:"AWS Cognito Setup"}),`
`,i.jsxs(s.ul,{className:"contains-task-list",children:[`
`,i.jsxs(s.li,{className:"task-list-item",children:[i.jsx(s.input,{type:"checkbox",disabled:!0})," ","Cognito User Pool created"]}),`
`,i.jsxs(s.li,{className:"task-list-item",children:[i.jsx(s.input,{type:"checkbox",disabled:!0})," ","App Client configured (no secret, PKCE)"]}),`
`,i.jsxs(s.li,{className:"task-list-item",children:[i.jsx(s.input,{type:"checkbox",disabled:!0})," ","Hosted UI domain configured"]}),`
`,i.jsxs(s.li,{className:"task-list-item",children:[i.jsx(s.input,{type:"checkbox",disabled:!0})," ","Cognito Identity Pool created"]}),`
`,i.jsxs(s.li,{className:"task-list-item",children:[i.jsx(s.input,{type:"checkbox",disabled:!0})," ","IAM roles for Identity Pool configured"]}),`
`]}),`
`,i.jsx(s.h3,{id:"azure-ad-federation",children:"Azure AD Federation"}),`
`,i.jsxs(s.ul,{className:"contains-task-list",children:[`
`,i.jsxs(s.li,{className:"task-list-item",children:[i.jsx(s.input,{type:"checkbox",disabled:!0})," ","Azure AD App Registration created"]}),`
`,i.jsxs(s.li,{className:"task-list-item",children:[i.jsx(s.input,{type:"checkbox",disabled:!0})," ","Client secret generated"]}),`
`,i.jsxs(s.li,{className:"task-list-item",children:[i.jsx(s.input,{type:"checkbox",disabled:!0})," ","Azure AD added as IdP in Cognito"]}),`
`,i.jsxs(s.li,{className:"task-list-item",children:[i.jsx(s.input,{type:"checkbox",disabled:!0})," ","Attribute mapping configured"]}),`
`,i.jsxs(s.li,{className:"task-list-item",children:[i.jsx(s.input,{type:"checkbox",disabled:!0})," ","MFA Conditional Access policy enabled"]}),`
`]}),`
`,i.jsx(s.h3,{id:"backend",children:"Backend"}),`
`,i.jsxs(s.ul,{className:"contains-task-list",children:[`
`,i.jsxs(s.li,{className:"task-list-item",children:[i.jsx(s.input,{type:"checkbox",disabled:!0})," ","API Gateway deployed"]}),`
`,i.jsxs(s.li,{className:"task-list-item",children:[i.jsx(s.input,{type:"checkbox",disabled:!0})," ","Lambda functions deployed"]}),`
`,i.jsxs(s.li,{className:"task-list-item",children:[i.jsx(s.input,{type:"checkbox",disabled:!0})," ","S3 buckets created with policies"]}),`
`,i.jsxs(s.li,{className:"task-list-item",children:[i.jsx(s.input,{type:"checkbox",disabled:!0})," ","DynamoDB tables created"]}),`
`]}),`
`,i.jsx(s.h3,{id:"frontend",children:"Frontend"}),`
`,i.jsxs(s.ul,{className:"contains-task-list",children:[`
`,i.jsxs(s.li,{className:"task-list-item",children:[i.jsx(s.input,{type:"checkbox",disabled:!0})," ","Frontend deployed to S3 + CloudFront"]}),`
`,i.jsxs(s.li,{className:"task-list-item",children:[i.jsx(s.input,{type:"checkbox",disabled:!0})," ","DNS configured"]}),`
`,i.jsxs(s.li,{className:"task-list-item",children:[i.jsx(s.input,{type:"checkbox",disabled:!0})," ","SSL certificates provisioned"]}),`
`]}),`
`,i.jsx(s.h3,{id:"testing",children:"Testing"}),`
`,i.jsxs(s.ul,{className:"contains-task-list",children:[`
`,i.jsxs(s.li,{className:"task-list-item",children:[i.jsx(s.input,{type:"checkbox",disabled:!0})," ","End-to-end authentication flow tested"]}),`
`,i.jsxs(s.li,{className:"task-list-item",children:[i.jsx(s.input,{type:"checkbox",disabled:!0})," ","S3 access with Cognito credentials tested"]}),`
`,i.jsxs(s.li,{className:"task-list-item",children:[i.jsx(s.input,{type:"checkbox",disabled:!0})," ","API authorization tested"]}),`
`]}),`
`,i.jsx(s.hr,{}),`
`,i.jsx(s.h2,{id:"next-steps",children:"Next Steps"}),`
`,i.jsxs(s.ol,{children:[`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"Confirm"})," AWS account access with Platform Operator"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"Set up"})," Cognito User Pool and Identity Pool"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"Configure"})," Azure AD federation"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"Scaffold"})," React frontend with Amplify auth"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"Test"})," end-to-end authentication flow"]}),`
`]}),`
`,i.jsx(s.h2,{id:"related-documents",children:"Related Documents"}),`
`,i.jsxs(s.ul,{children:[`
`,i.jsx(s.li,{children:i.jsx(s.a,{href:"./authentication-architecture",children:"Authentication Architecture"})}),`
`,i.jsx(s.li,{children:i.jsx(s.a,{href:"./authorization-model",children:"Authorization Model"})}),`
`,i.jsx(s.li,{children:i.jsx(s.a,{href:"./requirements-summary",children:"Requirements Summary"})}),`
`]})]})}function t(h={}){const{wrapper:s}=h.components||{};return s?i.jsx(s,{...h,children:i.jsx(l,{...h})}):l(h)}export{t as default,a as frontmatter,n as toc};
